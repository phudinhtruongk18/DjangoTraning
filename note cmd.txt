account:
    admin
    phu.truong@hdwebsoft.io
    123123

git:
    git clone https://github.com/LondonAppDeveloper/deploy-django-with-docker-compose --config core.autocrlf=false
    # stuck in this shit when deploy in docker
    # https://stackoverflow.com/a/53165472/13226749 this this one


cmd:
    docker-compose build

    docker-compose run --rm app sh -c "django-admin startproject app ."
    docker-compose run --rm app sh -c "python manage.py createsuperuser"

    docker-compose -f docker-compose-deploy.yml down --volumes
    docker-compose down --volumes --remove-orphans flag
    # TAKE IT DOWN (cause make some error with the one before)

    docker-compose -f docker-compose-deploy.yml build
    docker-compose -f docker-compose-deploy.yml up

% tam thoi bo dong nay o db
restart: always


% tam thoi bo dong nay o db
# RUN apk update && apk add libpq

# atomic transaction
{
'ATOMIC_REQUESTS': True,   in DATABASES in setting
    from django.db import transaction

    def viewfunc(request):
    # This code executes in autocommit mode (Django's default).
    do_stuff()

    with transaction.atomic():
    # This code executes inside a transaction.
    do_more_stuff()
}